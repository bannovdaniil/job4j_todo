<!doctype html>
<html lang="en">
<head th:replace="~{blocks/base_head :: baseHead(~{::title})}">
    <title>Список задач</title>
</head>
<body>
<div class="container-fluid p-0 justify-content-center">
    <header th:insert="~{blocks/header :: header}"></header>
    <div class="container col-9">
        <div class="row">
        </div>
        <div class="row">
            <div class="col-1 mx-5 h5 my-3">Задачи</div>
            <div class="col-9 mx-5 text-right">
                <label class="mt-3 btn-group btn-group-toggle">
                    <div th:if="${status == null}">
                        <a th:href="@{/}" th:value="all" th:id="all" class="btn btn-sm btn-success bi-calendar-week">&nbsp;
                            Все &nbsp;</a>
                        <a th:href="@{/tasks/status/done}" th:value="done" th:id="done"
                           class="btn btn-sm btn-outline-secondary bi-calendar-check">&nbsp; Выполненные &nbsp;</a>
                        <a th:href="@{/tasks/status/todo}" th:id="todo"
                           class="btn btn-sm btn-outline-secondary bi-calendar">&nbsp; Новые &nbsp;</a>
                    </div>

                    <div th:unless="${status == null}">
                        <a th:href="@{/}" th:value="all" th:id="all"
                           class="btn btn-sm btn-outline-secondary bi-calendar-week">&nbsp; Все &nbsp;</a>

                        <span th:if="${status.equals('DONE')}">
                           <a th:href="@{/tasks/status/done}" th:value="done" th:id="done"
                              class="btn btn-sm btn-success bi-calendar-check">&nbsp; Выполненные &nbsp;</a>
                           <a th:href="@{/tasks/status/todo}" th:id="todo" class="btn btn-sm btn-outline-secondary bi-calendar">&nbsp; Новые &nbsp;</a>
                        </span>
                        <span th:if="${status.toString().equals('TODO')}">
                           <a th:href="@{/tasks/status/done}" th:value="done" th:id="done"
                              class="btn btn-sm btn-outline-secondary bi-calendar-check">&nbsp; Выполненные &nbsp;</a>
                           <a th:href="@{/tasks/status/todo}" th:id="todo" class="btn btn-sm btn-success bi-calendar">&nbsp; Новые &nbsp;</a>
                        </span>
                    </div>
                </label>
            </div>
        </div>
        <div class="row">
            <div class="col mx-5">
                <table class="table  table-hover">
                    <thead class="thead-light">
                    <tr>
                        <th scope="col" class="col-auto">#</th>
                        <th scope="col" class="col-auto">Статус</th>
                        <th scope="col" class="col-auto">Время создания</th>
                        <th scope="col" class="col-9">Описание</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="task, item: ${tasks}"
                        class="clickable-row" style='cursor: pointer; cursor: hand;'
                        th:onclick="|location.href='@{/tasks/{taskId}(taskId=*{task.id})}'|">

                        <th th:text="${item.index + 1}"/>
                        <td class="justify-content-center">
                           <span th:if="${task.done}">
                                <i class="bi bi-check-square"></i>
                           </span>
                            <span th:unless="${task.done}">
                                <i class="bi bi-square"></i>
                           </span>
                        </td>
                        <td th:text="${{task.created}}"/>
                        <td th:if="${task.description.length() < 100}">
                            <a th:href="@{/tasks/{taskId}(taskId=${task.id})}" th:text="${task.description}"> </a>
                        </td>
                        <td th:unless="${task.description.length() < 100}">
                            <a th:href="@{/tasks/{taskId}(taskId=${task.id})}" th:text="${task.description.substring(0, 100) + ' ...'}"> </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="mb-3 col text-center">
                <a th:href="@{/tasks/add}" class="btn btn-primary"> Создать еще задачу </a>
            </div>
        </div>
    </div>
</div>
<div>
    <footer th:insert=" ~{blocks/footer :: footer}"></footer>
</div>
</div>
</body>
</html>